<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ hostname }} : Screenshot</title>
</head>
<body style="padding: 0;margin: 0">

<img id="screenshot-image" src="" width="100%" height="100%" alt="Screenshot">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

<script>

    function getScreenshot(){
            $.ajax({
                type: 'GET',
                url: '/media/{{image.name}}',
                success: function(response) {
                    $('#screenshot-image').attr('src', '/media/{{ image }}?' + new Date().getTime());
                    console.log('new pic')
                },
                error: function(response){
                    location.reload();
                }
            })
        }
    console.log('old pic')
    getScreenshot()
    setInterval(getScreenshot,3000);
</script>
</body>
</html>